#!/bin/sh
#
# $Id$
#
#	Build [options] - Configure and compile the mush.

case "$1" in
    -help | --help | --hel | --he)
	exec src/configure --help ;;
esac

echo "Building TinyMUSH 3.1..."

echo
echo "***** Configuring GNU DBM..."
echo
cd src/gdbm-1.8.0
./configure --enable-shared=no --enable-static=yes "$@"
echo
echo "***** Building GNU DBM..."
echo
make

echo
echo "***** Configuring the server..."
cd ..
if test -z "$*"; then
    ./configure
    echo "***** Building server using default config..."
else
    ./configure "$@"
    echo "***** Building server using custom config..."
fi
echo
rm -f .depend
touch .depend
make 2>&1 | tee Compile.log
cd ..

echo
echo "Done."
